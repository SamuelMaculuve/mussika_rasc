@model ASP_Mussika.Models.AcomodacaoViewModel

@{
    ViewBag.Title = "Acomodacao";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="clearfix"></div>
<div id="titlebar" class="gradient">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2>Escolha o método de Pagamento</h2>
                <nav id="breadcrumbs">
                    <ul>
                        <li><a href="/inicio/Principal">Inicio</a></li>
                        <li>Escolha o método de Pagamento</li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="container margin-bottom-75">
    <div class="row">
        <div class="col-lg-8 col-md-8 utf_listing_payment_section">
            <div class="utf_booking_listing_section_form margin-bottom-40">
                <h3><i class="sl sl-icon-paper-plane"></i> Aviso Importante</h3>
                <text style="text-align:justify;">
                    Caro utilizador, ao efectuar o pagamento de um produto ou serviço, evite expor os dados da sua conta bancária, paypal ou m-pesa, para tal, recomenda-se que preencha os dados sem que outras pessoas possam vê-los (cobrindo a tela ou simplemente mantendo uma certa distância). Este procedimento visa garantir a segurança das suas contas evitando o roubo ou clonagem de infomações sensíveis.
                    Caso tenha alguma dúvida, por favor contacte a nossa equipe de suporte ou acesse a página COMO PAGAR clicando neste link - <a style="color:red" href="https://mussika.co.mz/inicio/como_pagar">Como Pagar no Mussika</a>
                </text>
            </div>

            <div class="utf_booking_payment_option_form">
                <h3><i class="sl sl-icon-credit-card "></i> Métodos de Pagamentos</h3>
                <div class="payment">
                    <div class="utf_payment_tab_block">
                        <div class="utf_payment_trigger_tab">
                            <input checked="" id="stripe" name="cardType" type="radio" value="stripe">
                            <label for="stripe">Pagar Com Mpesa</label>
                            <img class="utf_payment_logo stripe" src="~/Content/library/images/mpesa.png" alt="">

                        </div>
                        <div class="utf_payment_tab_block_content">
                            <div class="row">

                                <div class="col-md-6">
                                    <div class="card-label">
                                        <label for="phoneNumbermpesa">Numero de Telefone</label>
                                        <input class="simple-field-data-mask" data-mask="000-000-000" id="phoneNumbermpesa" placeholder="Numero de Telefone" required="" type="text">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="utf_payment_tab_block" style="display:none" hidden>
                        <div class="utf_payment_trigger_tab">
                            <input checked="" id="paypal" name="cardType" type="radio" value="paypal">
                            <label for="paypal">PayPal</label>
                            <img class="utf_payment_logo paypal" src="~/Content/library/images/paypal_pay.png" alt="">
                        </div>
                        <div class="utf_payment_tab_block_content">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card-label">
                                        <label for="payPalname">PayPal Name</label>
                                        <input id="nameOnCard" name="payPalname" placeholder="Paypal Name" required="" type="text">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card-label">
                                        <label for="payPalemail">PayPal Email</label>
                                        <input id="payPalemail" name="payPalemail" placeholder="Paypal Email" required="" type="text">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card-label">
                                        <label for="phoneNumber">Phone Number</label>
                                        <input id="phoneNumber" placeholder="Phone Number" required="" type="text">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card-label">
                                        <label for="couponCode">Coupon Code?</label>
                                        <input id="couponCode" placeholder="Coupon Code" required="" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="utf_payment_tab_block utf_payment_tab_block_active">
                        <div class="utf_payment_trigger_tab">
                            <input type="radio" name="cardType" id="creditCart" value="creditCard">
                            <label for="creditCart">Cartão de Debito/Crédito</label>
                            <img class="utf_payment_logo" src="~/Content/library/images/pay_icon.png" alt="">
                        </div>
                        <div class="utf_payment_tab_block_content">
                            <div class="row" hidden>
                                <div class="col-md-6">

                                    <div class="card-label">
                                        <label for="card-number">Card Number</label>
                                        <input type="text" id="card-number" class="input-field" name="card-number" title="card number" aria-label="enter your card number" value="" tabindex="1" readonly>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card-label">
                                        <label for="cardholder-name">Card Holder Name</label>
                                        <input type="text" id="cardholder-name" class="input-field" name="cardholder-name" title="cardholder name" aria-label="enter name on card" value="" tabindex="5" readonly>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card-label">
                                        <label for="expiry-month">Expiry Month</label>
                                        <input type="text" id="expiry-month" class="input-field" title="expiry month" aria-label="two digit expiry month" value="" tabindex="2" readonly>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card-label">
                                        <label type="text" for="expiry-year">Expiry Year</label>
                                        <input type="text" id="expiry-year" class="input-field" title="expiry year" aria-label="two digit expiry year" value="" tabindex="3" readonly>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card-label">
                                        <label for="security-code">CVV Code</label>
                                        <input type="text" id="security-code" class="input-field" title="security code" aria-label="three digit CCV security code" value="" tabindex="4" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <a id="link" href="javascript:pagarMpesa();" class="button utf_booking_confirmation_button margin-top-20 margin-bottom-10">Confirmar Agora</a>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 margin-top-0 utf_listing_payment_section">
            <div class="utf_booking_listing_item_container compact utf_order_summary_widget_section">
                <div class="listing-item">
                    <img src="../Repository/images/Acomodacoes/@Model.foto_capa" alt="">
                    <div class="utf_listing_item_content">
                        <h3>@Model.nome</h3>
                        <span><i class="sl sl-icon-location"></i> @Model.endereco</span>
                        @*<span><i class="sl sl-icon-phone"></i> +(258) @Model.telefone</span>*@
                        <div class="utf_star_rating_section" data-rating="4.5">
                            <div class="utf_counter_star_rating">@Model.nomeDistrito</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="boxed-widget opening-hours summary margin-top-0">
                <h3><i class="fa fa-calendar-check-o"></i> Sumario da Reserva</h3>
                <ul>
                    <li>Data Chegada <span>@ViewBag.sumario.data_chegada</span></li>
                    <li>Quarto <span>@ViewBag.quarto.descricao</span></li>
                    <li>Data Saida <span>@ViewBag.sumario.data_saida</span></li>
                    <li>Hospede(s) <span>@ViewBag.sumario.Hospedes Hospede(s)</span></li>
                    <li>Deposito <span> 0,00MT</span></li>
                    <li>I.V.A <span>% 17.00</span></li>
                    <li class="total-costs">Sub Total <span>@string.Format("{0:N}MT", ViewBag.sumario.custo_total)</span></li>
                    @*<li class="total-costs">
                            <div class="col-md-8">
                                <input id="couponCode" placeholder="Have a coupon enter here..." required="" type="text">
                            </div>
                            <div class="col-md-4">
                                <input type="submit" class="coupon_code" value="Apply">
                            </div>
                            <div class="clearfix"></div>
                        </li>*@
                    <li class="total-costs">Custo Total <span>@string.Format("{0:N}MT", ViewBag.sumario.custo_total)</span></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/qunit/qunit-1.11.0.js"></script>
<script src="/Content/sinon-1.10.3.js"></script>
<script src="/Content/sinon-qunit-1.0.0.js"></script>
<script src="/Content/jquery.mask.js"></script>
<script src="/Content/jquery.mask.test.js"></script>

<script>

    var pagamentoActual = "paypal";
    $(document).ready(function () {



        $('#phoneNumbermpesa').mask('(258) 000-000-000');

        $("#paypal").click(function () {
            pagamentoActual = "paypal";
        })
        $("#stripe").click(function () {
            pagamentoActual = "mpesa";
        })
        $("#creditCart").click(function () {
            pagamentoActual = "creditCart";
            //location.href = 'https://payment.bim.mussika.co.mz/home/index?id=' +@Model.id+'&valor=@ViewBag.quarto.custo_diaria' + '&oque_e=acomodacao';
            location.href = '/Pagamento/pay_master_card?id=' +@Model.id+'&valor=@ViewBag.quarto.custo_diaria' + '&oque_e=acomodacao';
        })



    });
     function pagarMpesa() {

         if (pagamentoActual == "paypal") {

             informarErro("Seleccione um metodo de Pagamento");
             throw new Error("");

         } else if (pagamentoActual == "creditCart") {


             //location.href = 'https://payment.bim.mussika.co.mz/home/index?id='+@ViewBag.quarto.id+'&valor=@ViewBag.quarto.custo_diaria'+'&oque_e=acomodacao'+ "&checkIn=@ViewBag.sumario.data_chegada"+ "&checkOut=@ViewBag.sumario.data_saida";
            location.href = '/Pagamento/pay_master_card?id=' +@Model.id+'&valor=@ViewBag.quarto.custo_diaria' + '&oque_e=acomodacao';
         } else {
                 if ($('#phoneNumbermpesa').val() == "(258) 000-000-00") {

                    informarErro("Numero Invalido");
                    throw new Error('');
                 }

             location.href = "/PubReserva/pagarViaMpesa?id=@ViewBag.quarto.id&numero=" + $('#phoneNumbermpesa').val() + "&valor=@ViewBag.sumario.custo_total" + "&oque_e=acomodacao" + "&checkIn=@ViewBag.sumario.data_chegada"+ "&checkOut=@ViewBag.sumario.data_saida";


            }
    }
</script>
